# 20211020 TIL : JSP

어제에 이어서 JDBC를 이용하여 DB에 있는 데이터를 출력, 삽입, 수정, 삭제 기능을 구현하는 시간을 가졌다. 코드로는 이제 어떤식으로 작성해야하는지 알게 되었다. 하지만 서블릿, DAO, DTO, JSP의 역할을 나누는 이유가 궁금해졌다. 단순히 코드의 가독성을 올릴 수 있고 유지보수의 부담이 적어진다는 장점은 알고 있었지만, 이러한 개발방식이 무엇인지는 구체적으로 알려주지 않았다. 구글링을 해본 결과 여러가지 검색 결과가 있었는데 모델1, 모델2, MVC패턴에 대한 개념을 볼 수 있었다.

## 모델1

모델1 구조는 JSP를 이용한 단순한 모델이다. 브라우저가 요청을 보내면 JSP에서 비즈니스 로직을 직접 처리하고, 홈페이지에 데이터를 출력하여 내보내는 구조. 이렇게 될 경우 비즈니스로직과 홈페이지 출력 코드가 섞이게 되는 단점이 있다. 코드의 가독성이 떨어지고 이는 유지보수의 어려움으로 이어진다.

<br>

## 모델2

모델2 구조는 브라우저가 요청을 보내면 서블릿이 비즈니스 로직을 처리한다. 비즈니스 로직을 처리하는 과정에서 DB접근과 같은 기능들을 제공해주는 DAO, DTO(Bean) 객체를 이용하여 비즈니스 로직을 처리하고, 데이터 가공이 완료된 결과물을 보여줄 JSP 페이지를 선택하고 넘겨준다. JSP페이지는 클라이언트에게 보여줄 결과물만 출력하는 역할을 담당하게된다.

모델2는 비즈니스 로직만을 처리하는 서블릿, 출력부분만 담당하는 JSP페이지로 역할이 구분되어져 있다. 하나의 JSP에 모든 요청을 처리하는 모델1은 로직을 일부분만 변경하여도 다른 부분까지 영향을 미치지만, 모델2는 각 객체들이 가지는 역할이 명확하고 한정되어져 있기 때문에 유지보수에 상당히 유리하다.

하지만 모델2의 단점이라면, 설계가 잘 되어져 있어야 한다는 것이다. 서블릿과 JSP의 역할이 모호해지면 결국 모델1보다 못하게된다. 개발자의 높은 역량이 요구되어진다.

밑에 설명할 MVC패턴이 모델2의 구조를 사용하여 나온 개념이다. 나중에 배울 스프링에서는 MVC패턴이 중요한 개념에 속한다.

<br>

## MVC 패턴

MVC 패턴은 Model, View, Controller로 이루어진 디자인 패턴을 말한다. 각 객체의 역할에 대해 요약하자면 다음과 같다.

- Model은 비즈니스 로직을 처리하는 담당을 한다.
- View는 비즈니스 로직을 통한 결과를 클라이언트에서 볼 수 있도록 출력하는 역할
- Controller는 사용자의 입력을 처리하고 흐름 제어를 담당한다.

### Model

Model은 비즈니스 로직을 처리하기 위해 필요한 기능을 컨트롤러에게 제공한다. 정해진 규칙이 있는 것은 아니다. 컨트롤러가 비즈니스 로직을 요청받아 필요한 기능을 모델에 요청하고, 모델은 기능을 제공하여 비즈니스 로직을 처리한다.

### View

View의 역할은 클라이언트가 지속적으로 컨트롤러에게 요청을 보낼 수 있는 링크나 폼을 제공하여 컨트롤러에게 알맞은 요청을 보낼 수 있도록 한다. 예를 들면 게시판을 작성할 때 글쓰기 버튼이나, 회원가입을 위해 정보를 작성하는 폼을 말한다.

### Controller

비즈니스 로직을 처리하기위해 model 객체와 데이터를 주고받고 얻은 결과 데이터들을 View를 통해 출력하는 객체이다. 흐름제어와 클라이언트의 처리 요청을 담당한다.

<br>

이전에 MVC 패턴이 모델2 패턴을 사용한다고 했었는데, JSP에 비유하면 다음과 같다.

- Controller 역할을 Servlet이 한다. 클라이언트의 입력을 받아오고, 요청에 응답하기위해 필요한 모델을 호출하여 비즈니스 로직을 처리
- Model은 Controller를 통해 클라이언트로부터 입력받은 데이터를 DB에 연결하거나 다른 프레임워크를 통해 처리하고 다시 Controller에 넘겨준다. DAO, DTO가 해당된다.
- View 역할은 JSP가 담당한다. 결과데이터를 전달받은 Controller는 클라이언트에게 출력할 JSP 페이지를 선택하고, JSP는 해당 데이터를 출력하고 클라이언트가 홈페이지에서 데이터를 보는 구조이다.

MVC 패턴의 핵심은 비즈니스 로직을 처리하는 모델, 결과화면을 보여주는 View의 분리라고 볼 수 있다. 흐름제어와 클라이언트의 처리 요청은 Controller에 집중된다.
또한 Model과 View는 서로에게 영향을 전혀 끼치지 않는다. Model의 코드를 변경하더라도, View 부분에서는 영향을 받지 않는다. 따로 분리되어있기 때문에 유지보수를 하는데 매우 효율적인 특징을 가진다.

나중에 Spring을 배울 때 다시한번 복습해야할 것 같다. 웹 프로그래밍의 기초적인 개념이므로 항상 이 개념을 생각하면서 코드를 짜야할 것 같다.
