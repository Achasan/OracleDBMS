# 묵시적 형변환, 명시적 형변환

1. 묵시적 형변환 
    묵시적 형변환은 말그대로 개발자가 따로 형변환을 지시하지 않아도 시스템에서
    자동적으로 형변환을 일어나게 하는 것을 말한다.
    자바에서는 "1" + 1 을 출력하면 "11"이 되어 문자로 묵시적형변환이 일어나지만
    SQL에서는 '1' + 1 을 하면 2가 출력된다. 문자가 숫자로 변환되는 형변환이 일어난다.
    문자는 숫자 형태로 되어있어야 형변환이 일어난다. 1 + 'A'가 산술계산이 안되는 것 과 같다.

2. 명시적 형변환
    명시적 형변환은 함수를 사용하여 데이터값의 자료형을 다른 타입으로 바꾸는 것을 말한다.
    형변환을 할 수 있는 함수는 총 3가지가 존재한다.
    
    
    [날짜 > 문자] TO_CHAR(DATE, 'FORMAT') : 날짜를 문자로 변환시킬 때 사용, 매개값으로는 날짜 데이터, 출력 형식을 작성하면 된다.
    - 출력형식 : 다양한 출력형식을 제공하고 있는데 대표적인 것들만 추려보면
        년 : YYYY(2021), YY(21), YEAR(TWENTY TWENTY-ONE)
        월 : MM(09), MONTH(SEPTEMBER)
        일 : DD(04), DDTH(4TH - 몇 번째 날인지를 표시)
       시간 : HH24(하루를 24시간으로 표시) / HH(하루를 12시간으로 표시), MI(분), SS(초)

    [숫자 > 문자] TO_CHAR(NUMBER, 'FORMAT') : 숫자를 문자형으로 변환시키는 함수이다. 역시 형식을 지정하여 변환시킬 수 있다.
    - 출력 형식 
    9 : 자릿수를 뜻한다. TO_CHAR(1234, '99999')는 1234를 5자리까지만 출력하라는 의미인데, 1234는 4자리이므로 남은 자릿수는 출력되지않음
    0 : 빈 자릿수를 0으로 채운다는 뜻이다. TO_CHAR(1234, '099999')를 실행하면 001234가 나오게 된다.
    $ : $를 붙여서 표시한다는 뜻, TO_CHAR(1234, '$9999')를 실행하면 $1234가 나온다.
    . : 소수점 이하를 표시한다. 소수가 없더라도 0으로 표시된다. TO_CHAR(1234, '9999.00') = 1234.00
    , : 천 단위 구분 기호를 표시한다. TO_CHAR(1234, '99,999') = 1,234

    TO_NUMBER() : 숫자 형태로 생긴 문자를 숫자로 바꿔주는 함수이다. 
                  TO_NUMBER('2') = 2로 출력된다.
    
    TO_DATE() : 날짜 형태로 생긴 문자를 DATE 타입으로 바꿔주는 함수이다.
                TO_DATE('2021/09/04') = 2021년 9월 4일의 DATE 타입으로 바뀐다.

    

# DECODE() : 오라클 DB의 IF문
    DECODE()는 오라클 문법에 있는 IF문이라고 생각하면 된다.
    서로의 데이터가 같은지, 다른지를 구별하여 같을 경우, 다를 경우에 출력하는 값을 다르게 설정 가능하다.

    DECODE(A, B, '1', null) : A = B일 경우 '1', A != B일 경우 NULL 출력
    DECODE(A, B, '1', C, '2', null) : A = B 면 '1', A = C 면 '2', 해당하지 않을 경우 NULL 출력
                                      무조건 기준은 첫 번째 매개값이라는 것을 알 수 있다.  
    
    DECODE(A, B, DECODE(C, D, ', NULL)) : 안쪽에 있는 DECODE부터 실행된다. C = D이면 ', C != D이면 NULL 출력 후
                                          A = B 이면 DECODE() 값, A != B 이면 DECODE 값 출력
                                          ELSE에 해당하는 네 번째 매개값이 비어있으면 아무것도 출력하지 않은 상태가 된다.


# CASE문

    DECODE가 데이터 값들의 '=' 연산자만들 사용하여 처리되는 함수라면, CASE는 크거나 작은 조건까지 처리가 가능하다.
    CASE 문은 CASE() WHEN THEN ELSE END 순으로 사용이 된다.
    
    CASE(조건) WHEN(결과값 기준 조건문) THEN(출력값) 
               WHEN(결과값 기준 조건문2) THEN(출력값2) 
               WHEN(결과값 기준 조건문3) THEN(출력값3) 
               WHEN(결과값 기준 조건문4) THEN(출력값4) 
               ELSE (출력값5)
               END (별칭)

        CASE : CASE 뒤에는 함수나 연산을 통해 만들어져 나올 테이터 값을 적으면 된다.
        WHEN : CASE를 통해서 나온 결과값을 판단할 조건문을 작성해주면 된다. WHERE문처럼 사용한다.
        THEN : 조건에 일치할 경우에 출력할 값 적는다.
        ELSE : 여러가지 WHEN, THEN을 통해서 작성한 조건에 모두 일치하지 않을 경우 출력할 값을 적는다.
        END : CASE문을 통해 출력될 값들의 컬럼 별칭을 적는다.

    CASE 문에서는 컴마가 사용되지 않는다. 또한 연동하여 사용되는 키워드가 많으므로 잘 이해하고 사용해야한다.
    물론 그렇다고 CASE문만 사용하는 것은 아니다. '='을 통한 조건식을 사용하는 경우에는 DECODE 문이 훨씬 효율적이다.
    따라서 적절히 상황에 맞추어 사용하는 것이 좋다.




# 정규식 내용 정리

    이전에 LIKE 키워드를 사용하여 %과 _를 통해 원하는 위치에 오는 문자열을 찾는 조건문을 작성한 적이 있는데,
    이를 보다 구체적으로 체계화한 것이 정규식이다. 정규식은 유닉스에서 검색할 때 주로 사용되는 기술로 다양한
    메타문자들을 사용하여 검색 방법을 확장하는 것을 말한다. 먼저 정규식과 관련된 함수부터 알아보자.

    REGEXP_LIKE : LIKE 함수처럼 특정 패턴과 매칭되는 결과를 검색해내는 함수이다.
    REGEXP_REPLACE : REPLACE 함수를 확장한 개념으로 주어진 문자열에서 특정 패턴을 찾아서 주어진 다른모양으로 치환하는 함수
    REGEXP_SUBSTR : SUBSTR 함수를 확장하여 특정 패턴에서 주어진 문자를 추출해 내는 함수
    REGEXP_COUNT : 특정 메타문자를 사용하여 정규식에 해당하는 문자의 갯수를 카운트해주는 함수

    정규식 함수를 사용하기 위해서는 메타문자라는 것을 알아야한다. 메타문자는 상당히 복잡하고 외워야할 것도 많다.
    주로 사용하는 메타문자들을 알아보자

    ^ : 해당 문자로 시작하는 데이터를 출력
    $ : 해당 문자로 끝나는 데이터 출력
    . : 자릿수를 의미한다 EX ) 'S...E' S로 시작하여 중간에 3자릿수가 있고 E로 끝나는 데이터
    [] : 해당 문자에 해당하는 문자열
    [^] : 해당 문자에 해당하지 않는 문자열


### 정규식 이해해보기
  
    예를 들어 REGEXP_LIKE(TEXT, '[A]') 는 TEXT 컬럼에서 'A'를 포함하는 문자를 모두 출력하라는 뜻을 가지고 있다.
    REGEXP_LIKE 는 WHERE 문 뒤에 사용하며, 정규식으로 사용된 '[A]'는 []가 해당 문자에 해당하는 문자열을 출력하라는
    의미를 가지고 있으므로 'A'가 포함된 문자를 출력하라는 뜻이 된다.

    조금 더 응용하자면 '[A-Z]'는 알파벳 대문자를 포함하는 데이터를 출력하라는 뜻이 되고,
    '[a-zA-Z]'는 모든 알파벳이 포함되어있다면 데이터를 출력하라는 의미가 된다.

    그렇다면 '[A-Z] ' 의 뜻은 무엇일까? 알파벳 대문자로 시작하고(AND) 뒤에 공백이 있는 데이터를 출력하라는 의미가 된다.
    '[A-Z] [0-9]' 는 알파벳 대문자로 시작, 뒤에 공백이 있고 바로 다음에 숫자중 하나가 오는 정규식을 포함하는 데이터를
    출력하라는 의미가 된다.


### 연속적인 글자 수 지정하기 : {}
    
    '[A-Z]{2}'의 뜻은 무엇일까? 알파벳 대문자가 연속적으로 2개 오는 데이터를 포함하면 출력하라는 뜻이다.
    중괄호 안에 숫자가 들어가면 앞에 작성한 정규식이 연속으로 몇개 포함되어야하는지를 정할 수 있다.
    
    응용해보자, '[A-Z][0-9]{3}'이 나온다면 무슨 뜻이 될까? 알파벳 대문자와 숫자가 연속으로 오는 3자리의 데이터가 있다면
    출력하라는 뜻을 가지고 있다. 유의해야할 점은 알파벳대문자가 먼저쓰였으므로, 숫자가 먼저나오고 알파벳 대문자가 나오는
    데이터는 포함되지 않는다. 세 자릿수라고 써저있는 부분은 알파벳 대문자가 맨 앞에 나오고, 뒤의 두 자리 중에 숫자가 하나만
    오면 된다.

### 특정 위치를 지정하여 출력 : ^, $

    '^[a-zA-Z]'의 정규식을 이해해보자. ^는 위에서 시작되는 문자를 지정할 때 쓰인다고 했었다.
    알파벳 소문자나 대문자로 시작하는 데이터를 출력하라는 뜻이 된다.
    '^[0-9A-Z]'의 정규식은 숫자로 시작하거나 알파벳 대문자로 시작하는 데이터를 출력하라는 의미가 된다.

    여기서 한 가지 팁이 있는데, 여러 정규식을 연결할 때 바(|)를 사용하여 연결할 수 있다.
    '^[A-Z]|^[0-9]'의 정규식은 알파벳 대문자로 시작하거나 숫자로 시작하는 데이터를 출력하라는 뜻이 된다.

    대괄호 밖에 ^를 사용하면 시작위치를 정하는 의미가 된다. 대괄호 안에 ^를 넣으면 반대의 의미가 된다.
    NOT의 의미를 가지는 셈인데, '[^A-Z]'를 정규식으로 사용한다면, 알파벳 대문자로 이루어지지않은 데이터를 출력하라는 뜻이 된다.

    지금까지 배운 내용들을 응용하여 전화번호의 지역번호 중 서울만 출력하도록 필터링하기로 해보자.,
    서울은 02로 시작하고, 나머지 지역은 3자리로 시작하는 지역번호를 가지고 있다.
    이를 정규식으로 나타내면  '^[0-9]{2}\)[0-9]{4}'으로 나타낼 수 있다. '\)' 부분은 지역번호 뒤에 ')'가 붙어서 써준건데,
    ')'를 그냥 쓰게되면 함수의 소괄호가 종료되는 것으로 인식될 수 있다. 따라서 ')' 앞에 역슬래시(\)를 붙여주어 정규식에 사용하는
    소괄호라는 것을 시스템에 인식하도록 해준다. 이를 탈줄자(ESCAPE CASE)라고 한다. 탈출자는 후에 설명한다.


### 특정 조건 제외한 결과를 출력

    NOT을 사용하면 특정 조건을 제외한 결과를 출력하게 된다. 이전에 WHERE 문에서 NOT을 사용하면 조건식을 제외한 모든
    데이터들이 출력된다 했었는데 그와 같은 것이다.


### 특수문자를 찾기

    데이터값 중에서는 '*'이나 '?'같은 특수문자도 들어가있기 마련이다. 하지만 '*' 같은 경우에는 모든 값을 출력하는
    키워드인데, 이를 어떻게 해야 문제없이 문자로 인식하게 할 수 있을까?
    원래 기호의 뜻이 아닌 다른 뜻을 가진 문자를 메타문자라고 하는데, 메타문자로는 '?','*' 등이 있다.
    이러한 메타문자를 문자데이터값 그대로 출력하기 위해서는 '\'를 사용하여야한다. 메타문자 앞에 역슬래시를 붙이면 
    문자데이터값 그대로 출력할 수 있다.

    

