# GitHub 협업 (20210914)

월요일부터 시작한 자바프로젝트를 진행하면서 파일병합, 버전관리에 대한 불편함을 처음 느꼈다.
조원들이 작업해야할 내용들을 모아서 병합을 진행하는데, 이미지파일 불러오는 것에서 처음 막히고,
병합한 파일을 조원들에게 공유했는데 조원들 간에 실행이 안되서 한 시간 동안 맥빠지게 고쳤었다.

에러는 기본클래스가 없다는 오류가 뜨는데 왜 오류가 뜨는지에대한 경우의 수가 너무 많았다.
코드에서 에러가 난 줄 알았는데 내가 설치된 jdbc 버전과 조원들의 버전이 달라서 일어난 오류였다.

병합하면서 든 생각은 매 번 병합관리할 때마다 이런 과정을 거쳐야 한다는 점이 프로젝트의 진행에
큰 차질을 빚게 될 것이라고 생각이 들어서 조원들에게 깃헙을 배워서 쓰자는 의견을 제시했다.
학원에서는 깃헙의 깃자도 꺼낸 적이 없었고, 그저 개발자를 할 생각이면 깃헙이 협업하는데 꼭 필요하니
프로젝트 때 사용하는 법을 배우라고만 어디에서 본 기억이 있었다.

혼자 공부한 내용을 커밋하고, 코드 작성한 내용을 커밋하면서 깃헙에 익숙해져있었지만,
깃헙의 꽃이라 할 수 있는 브랜치 생성, 풀 리퀘스트같은 메인기능들을 사용하려니 약간 긴장되기도 했지만
좋은 경험이라고 생각하고 조원들과 같이 진행해보려고 하였다.


# git clone 하기

깃헙에 프로젝트파일을 업로드했다면 이제 조원들이 프로젝트파일을 clone해서 사용할 수 있게 해야한다.
여기서부터 많이 해맸는데, 이클립스 기준으로는 git 인터페이스로 접근해서 git repository를 만들고,
'Clone a Git Repository and add this clone view'를 클릭하여 깃헙 URL주소를 입력하면 된다.

처음 프로젝트폴더를 생성하고 clone을 한다면 master 브랜치밖에 없을 것이다. git clone을 한 조원은
branch를 생성할 수 있고, branch를 깃헙에 바로 업로드할 수 있다.

가끔 URL입력 후 아래 계정정보를 입력했는데 clone이 안되는 경우가 있다. 이 경우에는 github 토큰을 발행해서
비밀번호 대신 토큰을 넣어주어야한다. clone이 제대로 진행되었다면 원격저장소인 Remote Tracking을 확인하여
master 브랜치가 있는지 확인하자.


# 브랜치 생성

git clone을 했다면 clone을 한 조원 누구나 브랜치를 생성할 수 있고, branch에서 작업한 내용을 github에 push 할 수 있다.
git clone이 되면 Branches라는 탭이 보이는데, 거기에는 Local, Remote Tracking 폴더가 있다.
로컬저장소, 원격저장소를 뜻하는데, Remote Tracking에는 프로젝트 파일을 업로드한 사람의 최초 브랜치인 master 브랜치가 있을 것이다.
master 브랜치로 이동하게되면 프로젝트 파일들을 관리할 수 있는데, 하나의 브랜치로 이동하는 것을 체크아웃이라고 한다.

master 브랜치로 체크아웃하게되면 브랜치를 로컬저장소로 복사할 것인지, 원격저장소에 있는대로 사용할 것인지를 물어본다.
조원들이 다 같이 협업하는 방식이기 때문에 master브랜치는 merge용 브랜치로만 사용하고, 조원마다 서로 다른 branch를 만들어서
작업하는 것이 좋다. 따라서 로컬저장소로 master 브랜치를 복사한 다음에, 새로운 브랜치를 만들어서 작업하는 것이 좋다.

로컬저장소 뿐만 아니라 모든 브랜치를 우클릭하면 Switch To라는 탭이 있는데, 로컬저장소에 있는 브랜치마다 
체크아웃하여 원활하게 개발을 진행할 수 있다.
새로운 브랜치를 만들어서 작업한 내용을 github에 push하면 새로운 브랜치가 생성되면서 그 브랜치에 자신이 작업한 결과물이
업로드 되게 된다.


# 만든 브랜치를 하나로 합치기, merge

지금 자바프로젝트를 진행중인 조원은 총 4명이다. 4명의 조원이 각자의 브랜치를 가지고 작업을 한 다음,
브랜치를 깃헙에 업로드하면 master브랜치를 포함한 5개의 브랜치가 생성되게 된다.
이제 각자 개발한 기능들을 master 브랜치로 통합하는 merge 작업을진행해야한다.
브랜치들을 각각 하나로 합치기 위해서는 pull request라는 과정을 거치게 되는데, pull request는 간단히 말하면
'내가 작업한 브랜치를 push(업로드)  했으니 master 브랜치와 비교하여 겹치는 부분이 있는지 확인한다음 넣어주세요' 이다. 

pull request가 들어오면 프로젝트를 생성한 사람이 master 브랜치에 합치는데 문제가 없는지 확인하고, 수락하면
조원이 만든 브랜치가 master 브랜치에 합병되게 된다. 합병된 다음에는 조원이 만들었던 브랜치를 삭제할 것인지 물어보는데,
브랜치를 깔끔하게 다루기 위해서는 삭제하는 것이 좋지만, 나중을 위해 남겨둘 수도 있다.

다시 pull request로 돌아가자면, github은 기본 브랜치(master)와 조원이 생성한 브랜치를 비교하여 병합할 때 생길 수 있는
문제점들을 체크해서 코드 충돌이 일어나는 파일, 위치가 어디인지 알려준다. 충돌나는 지점을 보고 직접 코드를 수정하여
comflict resolve 버튼을 누르면 문제가 해결되고, 병합을 진행할 수 있게된다. github의 가장 큰 이점중에 하나인 기능인 것 같다.
지금 자바프로젝트는 같은 수업을 듣고있는 조원들끼리 진행하기때문에 큰 문제없이 잘 진행되고있지만 만약 모르는 익명의 사람들과
협업을 진행할 때는 pull request 기능을 잘 활용할 수 있을 것 같다는 생각이 든다.

무엇보다 협업하는 사람들끼리 코드에 문제가 생길일은 없는지, 효율적인 코드인지 코드리뷰도 서로 진행하면서 의견을 나눌 수 있고,
merge를 하는 과정에서 생기는 활발한 커뮤니케이션이 개발역량을 늘릴 수 있는 행동이라고 생각하기 때문이다.


# 병합된 master 브랜치를 다시 가져오기, pull

매일 push만 해서 그런지 pull은 익숙하지 않았는데, 이번 기회를 통해 pull에 대해 구체적으로 알게 되었다.
병합한 master 브랜치를 조원들이 받아와야한다. 근데 Java 이클립스는 병합을 하는 과정에서 신경써서 세팅해줘야하는 부분들이 있었다.

이클립스에서 pull하는 과정을 정리하면 다음과 같다.

1. 깃 레포지토리를 우클릭하고 pull을 누른다. 원격저장소에 있는 브랜치 정보를 갱신

2. 로컬저장소(Local)에 'master' 브랜치가 있으면 삭제한다. 이미 이전버전의 브랜치이기 때문에 삭제해도 상관없다.

3. 원격저장소(Remote Tracking)에 있는 master 브랜치를 우클릭하여 'Create Branch'를 클릭하여 브랜치를 생성한다.

4. 로컬저장소에 브랜치가 생성되었는지 확인한다. 원격저장소에있는 master 브랜치를 컴퓨터에 저장하는 것이다.

5. master 브랜치가 로컬저장소에 생성되었으면 수정한 코드로 바뀐 상태인지 확인해본다. 

여기까지는 공통사항이다. 아래는 자바프로젝트를 진행하면서 조원들끼리 세팅해야했던 항목들이다.

6. image 패키지안에 이미지파일이 있는지 확인한다. 프로젝트 폴더에 있는 image 파일들을 사용하려면 image 패키지를 추가해주어야한다.
   src - New - Folder 를 클릭하고, 아래에 Advanced를 클릭, Link to alternate location(Linked Folder) 선택 후 
   image 폴더가 있는 곳을 경로로 지정한다.

7. 다음은 ojdbc8.jar 파일을 체크. 프로젝트 폴더 우클릭 - Build Path - Configure Build Path 클릭 - Libraries 탭 클릭
   ojdbc8.jar 파일의 경로가 제대로 설정되어있는지 확인한다. 파일아이콘에 X표시가 되어있으면 경로설정이 제대로 안되있으므로
   파일을 선택하여 remove 하고 다시 추가해주어야 한다.



# push가 되지 않게 무시하도록 설정, .gitignore 파일

프로젝트를 생성한 조장이 master 브랜치로 병합하고 조원들이 만들었던 브랜치는 삭제하여 이제 브랜치는 다시 master
브랜치만 남게 되었다. 병합된 브랜치를 다시 조원들이 원격저장소를 통해 불러와야하는데 여기에서 상당한 시간을 소비했다.

무엇보다 가장 힘들었던 점은 조원들마다 설치된 이클립스 경로나 jdbc파일 경로, 깃 레포지토리를 저장하는 경로가 모두 다르기 때문에
병합하는 과정에서 조장의 컴퓨터로 세팅이 되어있기 때문에 이 부분을 수정하는데 많은 시간이 걸렸다.

프로젝트 파일을 생성하면 폴더에는 .project와 .classpath 라는 파일이 생성되는데, 프로젝트 폴더의 정보와 링크된 이미지폴더의 경로 등이 담긴
파일들이다. 이 파일들은 협업을 진행할 때 .ignore이라는 폴더에 추가하여 커밋이 되지 않도록 설정해주어야 한다.
조원들 각자 사용하는 컴퓨터, 이클립스 설치경로, 깃 폴더 경로가 각각 다르기 때문에 병합을 하더라도 따로 세팅을 해줘야해서 
병합관리를하는데 굉장히 힘들어진다.

따로 구글링을 해본 결과 https://gitignore.io/ 라는 사이트가 있었다. 어떤 툴로 협업을 진행하는지 키워드를 적으면 
git ignore를 해야하는 파일들의 리스트를 정리해서 텍스트로 띄워준다. 텍스트를 전부 복사해서
git repository에 있는 .gitignore 파일에 붙여넣기해주면 push할 때 해당 파일리스트들은 무시한다.

gitignore.io 에서도 .project 파일과 .classpath 파일을 ignore하는 항목이 없어서 따로 추가해 주었다.

  \# Eclipse Core
  .project

  \# JDT-specific (Eclipse Java Development Tools)
  .classpath

위 항목들을 .gitignore 파일에 추가해주면 .project와 .classpath 파일이 push 할 때 적용되지 않는다.
